<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Searcher</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
</head>
<body data-theme="dark" data-nsfw="{{ 'true' if current_user.is_authenticated and current_user.nsfw_allowed else '' }}">
    <div class="container">
        <div class="header">
            <h1>Anime Searcher</h1>
            <div class="header-buttons">
                {% if current_user.is_authenticated %}
                    <span>–ü—Ä–∏–≤–µ—Ç, {{ current_user.username }}!</span>
                    <button id="btn-settings" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
                    <a href="{{ url_for('logout') }}" class="btn btn-logout">–í—ã–π—Ç–∏</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-login">–í—Ö–æ–¥</a>
                    <a href="{{ url_for('register') }}" class="btn btn-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                {% endif %}
                <button id="theme-toggle" title="–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É">üåô</button>
            </div>
        </div>
        
        <div class="search-box">
            <input type="text" id="search-input" placeholder="–í–≤–µ–¥–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞–Ω–∏–º–µ (—Ä—É—Å/eng/jp)..." autocomplete="off">
            <select id="sort-select">
                <option value="score">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É (score)</option>
                <option value="popularity">–ü–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏</option>
                <option value="members">–ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</option>
                <option value="favorites">–ü–æ –∏–∑–±—Ä–∞–Ω–Ω–æ–º—É</option>
                <option value="start_date">–ü–æ –¥–∞—Ç–µ –≤—ã—Ö–æ–¥–∞</option>
            </select>
            <button id="random-btn">–°–ª—É—á–∞–π–Ω–æ–µ –∞–Ω–∏–º–µ</button>
        </div>
        
        <div id="filters" class="filters" style="max-height: 0; overflow: hidden; opacity: 0; padding-top: 0; padding-bottom: 0;">
            <h3>–§–∏–ª—å—Ç—Ä—ã –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∞–Ω–∏–º–µ</h3>
            
            <div class="filter-group">
                <label>–¢–∏–ø:</label>
                <select id="filter-type">
                    <option value="">–õ—é–±–æ–π</option>
                    <option value="tv">TV</option>
                    <option value="movie">Movie</option>
                    <option value="ova">OVA</option>
                    <option value="special">Special</option>
                    <option value="ona">ONA</option>
                    <option value="music">Music</option>
                </select>
            </div>
            <div class="filter-group">
                <label>–°—Ç–∞—Ç—É—Å:</label>
                <select id="filter-status">
                    <option value="">–õ—é–±–æ–π</option>
                    <option value="airing">–í —ç—Ñ–∏—Ä–µ</option>
                    <option value="complete">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                    <option value="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–µ–µ</option>
                </select>
            </div>
            <div class="filter-group">
                <label>–†–µ–π—Ç–∏–Ω–≥:</label>
                <select id="filter-rating">
                    <option value="">–õ—é–±–æ–π</option>
                    <option value="g">G (–í—Å–µ –≤–æ–∑—Ä–∞—Å—Ç—ã)</option>
                    <option value="pg">PG (–î–µ—Ç–∏)</option>
                    <option value="pg13">PG-13 (–ü–æ–¥—Ä–æ—Å—Ç–∫–∏ 13+)</option>
                    <option value="r17">R-17 (–ù–∞—Å–∏–ª–∏–µ/–Ω–µ–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞)</option>
                    <option value="r">R+ (–õ–µ–≥–∫–∞—è –Ω–∞–≥–æ—Ç–∞)</option>
                    <option value="rx">Rx (–•–µ–Ω—Ç–∞–π)</option>
                </select>
            </div>
            <div class="filter-group">
                <label>–ì–æ–¥ –æ—Ç:</label>
                <input type="number" id="filter-min-year" min="1900" max="2026" placeholder="e.g., 2000">
                <label>–î–æ:</label>
                <input type="number" id="filter-max-year" min="1900" max="2026" placeholder="e.g., 2025">
            </div>
            <div class="filter-group genres">
                <label>–ñ–∞–Ω—Ä—ã (–≤—ã–±–µ—Ä–∏ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ):</label>
                <div class="genres-list">
                    <!-- –°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤ –∏–∑ Jikan -->
                    <label><input type="checkbox" value="1"> Action</label>
                    <label><input type="checkbox" value="50"> Adult Cast</label>
                    <label><input type="checkbox" value="46"> Award Winning</label>
                    <label><input type="checkbox" value="51"> Anthropomorphic</label>
                    <label><input type="checkbox" value="28"> Boys Love</label>
                    <label><input type="checkbox" value="26"> Girls Love</label>
                    <label><input type="checkbox" value="4"> Comedy</label>
                    <label><input type="checkbox" value="5"> Avant Garde</label>
                    <label><input type="checkbox" value="53"> Childcare</label>
                    <label><input type="checkbox" value="52"> CGDCT</label>
                    <label><input type="checkbox" value="39"> Detective</label>
                    <label><input type="checkbox" value="55"> Delinquents</label>
                    <label><input type="checkbox" value="8"> Drama</label>
                    <label><input type="checkbox" value="49"> Erotica</label>
                    <label><input type="checkbox" value="9"> Ecchi</label>
                    <label><input type="checkbox" value="56"> Educational</label>
                    <label><input type="checkbox" value="57"> Gag Humor</label>
                    <label><input type="checkbox" value="58"> Gore</label>
                    <label><input type="checkbox" value="47"> Gourmet</label>
                    <label><input type="checkbox" value="60"> Idols (Female)</label>
                    <label><input type="checkbox" value="61"> Idols (Male)</label>
                    <label><input type="checkbox" value="67"> Medical</label>
                    <label><input type="checkbox" value="43"> Josei</label>
                    <label><input type="checkbox" value="25"> Shoujo</label>
                    <label><input type="checkbox" value="42"> Seinen</label>
                    <label><input type="checkbox" value="36"> Slice of Life</label>
                    <label><input type="checkbox" value="57"> Gag Humor</label>
                    <label><input type="checkbox" value="13"> Historical</label>
                    <label><input type="checkbox" value="14"> Horror</label>
                    <label><input type="checkbox" value="35"> Harem</label>
                    <label><input type="checkbox" value="12"> Hentai</label>
                    <label><input type="checkbox" value="66"> Mahou Shoujo</label>
                    <label><input type="checkbox" value="65"> Magical Sex Shift</label>
                    <label><input type="checkbox" value="17"> Martial Arts</label>
                    <label><input type="checkbox" value="18"> Mecha</label>
                    <label><input type="checkbox" value="19"> Music</label>
                    <label><input type="checkbox" value="2"> Adventure</label>
                    <label><input type="checkbox" value="11"> Strategy Game</label>
                    <label><input type="checkbox" value="77"> Team Sports</label>
                    <label><input type="checkbox" value="30"> Sports</label>
                    <label><input type="checkbox" value="54"> Combat Sports</label>
                    <label><input type="checkbox" value="3"> Racing</label>
                    <label><input type="checkbox" value="70"> Performing Arts</label>
                    <label><input type="checkbox" value="71"> Pets</label>
                    <label><input type="checkbox" value="58"> Gore</label>
                    <label><input type="checkbox" value="40"> Psychological</label>
                    <label><input type="checkbox" value="41"> Suspense</label>
                    <label><input type="checkbox" value="37"> Supernatural</label>
                    <label><input type="checkbox" value="31"> Super Power</label>
                    <label><input type="checkbox" value="76"> Survival</label>
                    <label><input type="checkbox" value="74"> Love Status Quo</label>
                    <label><input type="checkbox" value="64"> Love Polygon</label>
                    <label><input type="checkbox" value="73"> Reverse Harem</label>
                    <label><input type="checkbox" value="22"> Romance</label>
                    <label><input type="checkbox" value="72"> Reincarnation</label>
                    <label><input type="checkbox" value="21"> Samurai</label>
                    <label><input type="checkbox" value="23"> School</label>
                    <label><input type="checkbox" value="24"> Sci-Fi</label>
                    <label><input type="checkbox" value="29"> Space</label>
                    <label><input type="checkbox" value="82"> Urban Fantasy</label>
                    <label><input type="checkbox" value="83"> Villainess</label>
                    <label><input type="checkbox" value="32"> Vampire</label>
                    <label><input type="checkbox" value="15"> Kids</label>
                    <label><input type="checkbox" value="27"> Shounen</label>
                    <label><input type="checkbox" value="38"> Military</label>
                    <label><input type="checkbox" value="48"> Workplace</label>
                    <label><input type="checkbox" value="59"> High Stakes Game</label>
                    <label><input type="checkbox" value="62"> Isekai</label>
                    <label><input type="checkbox" value="63"> Iyashikei</label>
                    <label><input type="checkbox" value="68"> Organized Crime</label>
                    <label><input type="checkbox" value="69"> Otaku Culture</label>
                    <label><input type="checkbox" value="75"> Showbiz</label>
                    <label><input type="checkbox" value="79"> Video Game</label>
                    <label><input type="checkbox" value="80"> Visual Arts</label>
                    <label><input type="checkbox" value="81"> Crossdressing</label>
                </div>
            </div>
            
            <div class="filter-actions">
                <button id="apply-filters" class="btn-primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∏ –ø–æ–ª—É—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ</button>
                <button id="clear-filters" class="btn-secondary">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
            </div>

            <div id="found-count" class="found-count hidden"></div>
        </div>
        
        <button id="toggle-filters">–ü–æ–∫–∞–∑–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã ‚ñº</button>
        
        <div id="loading" class="loading hidden">–ò—â–µ–º...</div>
        <div id="error" class="error hidden"></div>
        
        <div id="results" class="grid"></div>
        
        <div id="pagination" class="pagination hidden">
            <button id="prev-page">‚Üê –ù–∞–∑–∞–¥</button>
            <span id="page-info"></span>
            <button id="next-page">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ NSFW -->
    <div id="nsfw-modal" class="modal">
        <div class="modal-content">
            <h2>–í–∞–∂–Ω–æ!</h2>
            <p>–≠—Ç–æ—Ç —Å–∞–π—Ç –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç 18+ (Hentai, Ecchi –∏ –¥—Ä—É–≥–æ–π NSFW-–º–∞—Ç–µ—Ä–∏–∞–ª).<br>–•–æ—Ç–∏—Ç–µ –≤–∫–ª—é—á–∏—Ç—å –µ–≥–æ?</p>
            
            <div class="modal-buttons">
                <button id="nsfw-yes" class="btn-yes">–î–∞, –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 18+</button>
                <button id="nsfw-no" class="btn-no">–ù–µ—Ç, —Ç–æ–ª—å–∫–æ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç</button>
            </div>
            
            <label class="remember">
                <input type="checkbox" id="remember-choice"> –ó–∞–ø–æ–º–Ω–∏—Ç—å –º–æ–π –≤—ã–±–æ—Ä
            </label>
        </div>
    </div>
</body>
</html>